<!DOCTYPE html>
<html lang="en">

<head>
    <link rel="stylesheet" href="./style/login.css">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<h1 class="head">Signup<h1>
        <hr>


        <div id="signup">

            

            <label for="">Email</label> <!-- -->
            <!--Signup-->
            <input id='email' type="email">
            <br>
            <label for="">password</label> <!-- -->
            <!--Signup-->
            <input id='pass' type="password">
            <br>
            <button id="Go">Go</button>
            <h2 class="error" id="invalidEmail">Email is invalid</h2>
            <h2 class="error" id="passwordInvalid">Invalid password Must contain 6 characters or more</h2>
            <h2 class="error" id="accinuse">Account already in use !</h2>
    


        </div>
        <h1 class="head">Sign in</h1>
        <div id="login_">
            <label for="">Email</label> <!-- -->
            <!--LOGIN-->
            <input id='email_' type="email">
            <br>
            <label for="">password</label> <!-- -->
            <!--LOGIN-->
            <input id='pass_' type="password">
            <br>
            <button id="btn_">Go</button>


            <button id='google'>Google </button>
            <!--Login-->\
            <h2 class="error" id="loginError">Password or email is incorrect </h2>

        </div>



        <hr>

        <br>
        <br>
        <br>


                <div class="images">
                    <img src="./man-working-laptop-room-flat-cartoon-character-sitting-behind-computer-freelancer-workplace-work-desk-business-concept-143039878.jpg" alt="" class="man">
                    <img src="./person-working-home-cartoon-character-computer-vector-illustration-184350874.jpg" alt="">
                </div>

        <style>
            body {
                padding-top: 60px;;
                background-color: #011627;
            }
            .signup{
                display: inline-block;
                align-items: center;
            }

            .head {
                color: #2AB6CA;;
                text-align: center;
                font-family: sans-serif;
                font-size: 28px;
            }

            label {
                color: #343944;
                font-size: 21px;
                font-family: monospace;

            }
            .error{
                color:red;
                font-family: monospace;
                font-size:14px;
            }

            input {
                cursor: pointer;
                color: #4100aa;
                background-color:cyan;
                border: none;
                font-family: cursive;
            }

            input:hover {
            
                transition:1s ease-out;
                background-color:#343944;
                color: cyan;

            }

            button {
                text-align: center;
                width:120px;
                height:35px;;
                border:2px solid white;
                border-radius:10px;
                background-color: transparent;
                color:white;
                cursor: pointer;
                position: relative;
            
                

            }

            button:hover {
                background-color:white;
                color:black;
                transition:1s ease;

   
            }
            button::before{
                content: '';
                position:absolute;
                left: 0 ;
                top:50px;
                background:transparent;
                height:50%;
                width:100%;
                transform:  perspective(1em)
                rotateX(40deg) scale(1,0.35);
                filter:blur(8px);
                transition: 1s ease;

            



            }
            img{
                padding-left:400px;
                text-align:center;
                height:200px;
            }
            .images{
                background-color:white;
            }
            .man{
                padding-right:400000px;
            }
        </style>


        <script type="module">
            // Import the functions you need from the SDKs you need
            import { initializeApp } from "https://www.gstatic.com/firebasejs/9.8.3/firebase-app.js";
            import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, signInWithPopup, GoogleAuthProvider } from "https://www.gstatic.com/firebasejs/9.8.3/firebase-auth.js";
            // TODO: Add SDKs for Firebase products that you want to use
            // https://firebase.google.com/docs/web/setup#available-libraries

            // Your web app's Firebase configuration
            const firebaseConfig = {
                apiKey: "AIzaSyAzMjbfCRxvsa9sO5V5AOpun39P3Bn5BQQ",
                authDomain: "cody-cc9a5.firebaseapp.com",
                projectId: "cody-cc9a5",
                storageBucket: "cody-cc9a5.appspot.com",
                messagingSenderId: "1064418253596",
                appId: "1:1064418253596:web:732e3ee1a015546439f8d9"
            };

            // Initialize Firebase
            const app = initializeApp(firebaseConfig);
            const auth = getAuth(app);



            // 
            //HIDING ERROR MESSAGES
            document.getElementById("invalidEmail").style.display="none"
            document.getElementById("passwordInvalid").style.display = "none"
            document.getElementById("accinuse").style.display = "none"
            document.getElementById("loginError").style.display = "none"

//GETTING username




            ////////////////////////////////



            document.getElementById("Go").onclick = function () {
                const email = document.getElementById("email").value

                const password = document.getElementById("pass").value
                createUserWithEmailAndPassword(auth, email, password)
                    .then((userCredential) => {
                        // Signed in 
                        document.getElementById("email_").style.border = "1px solid red"
                        document.getElementById("pass").style.border = "1px solid red"

                        const user = userCredential.user;
                        // ...
                        console.log("created user___")
                    })
                    .catch((error) => {

                        const errorCode = error.code;
                        const errorMessage = error.message;
                        const e=document.getElementById("e")
                        // ..
                        console.log( errorMessage)

                        if(errorMessage== 'Firebase: Error (auth/invalid-email).'){
                            accinuse.style.display = "none"
                            passwordInvalid.style.display = "none"
                            invalidEmail.style.display=""

                            e.innerHTML = "error"
                            
                            
                        }
                        else if(errorMessage== 'Firebase: Password should be at least 6 characters (auth/weak-password).'){
                            invalidEmail.style.display = "none"
                            accinuse.style.display ="none"
                            passwordInvalid.style.display = ""
                            console.log("weak password (password must be 6 characters )")
                            
                        }
                        else if(errorMessage=='Firebase: Error (auth/email-already-in-use).'){
                            invalidEmail.style.display = "none"
                            passwordInvalid.style.display="none"
                            accinuse.style.display = ""
                            console.log("account in use ")
                            document.getElementById("e").style.border="1px solid red"
                        }
                    });




            }

            document.getElementById("btn_").addEventListener("click", function () {
                const email1 = document.getElementById("email_").value
                const password1 = document.getElementById("pass_").value



                signInWithEmailAndPassword(auth, email1, password1)
                    .then((userCredential) => {

                        // Signed in 
                        const user = userCredential.user;
                        // ...
                        console.log("code to move ahead " + "      loged in ")
                        //MOVE USER TO ANOTHER PAGE 
                        document.location.href="index.html"
                    })
                    .catch((error) => {


                        const errorCode = error.code;
                        const errorMessage = error.message;
                        console.log( errorMessage)
                        if(errorMessage== 'Firebase: Error (auth/invalid-email).'){
                            console.log("invalid email or password")
                            document.getElementById('loginError').style.display=""
                        }
                    });
            })

            document.getElementById("google").onclick = function () {
                document.location.href = "google-auth.html"
            }

            //export function






        </script>



        </body>


</html>